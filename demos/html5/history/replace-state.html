<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>demo</title>
    <link rel="stylesheet" href="../../../common/vendor/bootstrap/dist/css/bootstrap.css">
    <script src="../../../common/vendor/jquery/dist/jquery.js"></script>

</head>
<body>

<ul class="nav nav-pills">
    <li><a id="first-btn">页面1</a></li>
    <li><a id="second-btn">页面2</a></li>
    <li><a id="third-btn">页面22</a></li>
</ul>

<ul class="nav nav-pills">
    <li><button id="back-btn" class="btn btn-default">后退</button></li>
    <li><button id="forward-btn" class="btn btn-default">前进</button></li>
</ul>

<h1 id="page-title">首页（默认）</h1>
<p id="page-content">首页的内容（默认）</p>


<script>
    var titleElem = $('#page-title');
    var contentElem = $('#page-content');


    $('#first-btn').click(function(e) {
        history.pushState({
            url: '#first-page',
            title: '第1个页面',
            content: '第1个页面的内容'
        }, '#first');
        titleElem.html('第1个页面');
        contentElem.html('第1个页面的内容');
        console.log(history);
    });

    $('#second-btn').click(function(e) {
        history.pushState({
            url: '#second-page',
            title: '第2个页面',
            content: '第2个页面的内容'
        }, '#second');
        titleElem.html('第2个页面');
        contentElem.html('第2个页面的内容');
        console.log(history);
    });

    $('#third-btn').click(function(e) {
        history.replaceState({
            url: '#third-page',
            title: '第22个页面',
            content: '第22个页面的内容'
        }, '#thrid');
        titleElem.html('第22个页面');
        contentElem.html('第22个页面的内容');
        console.log(history);
    });

    //前进
    $('#forward-btn').click(function(e) {
        history.forward()
    });

    //后退
    $('#back-btn').click(function(e) {
        history.back();
    });


    //切换处理
    window.addEventListener('popstate',function(e){
        var state = e.state;
        if(state){
            titleElem.html(state.title);
            contentElem.html(state.content);
        }
        console.log('//////////popstate begin//////////');
        console.log(e);
        console.log(state);
        console.log(history);
        console.log('//////////popstate end//////////');
    }, false);

    window.addEventListener('hashchange', function(e) {
        console.log('//////////haschagne//////////');
        console.log(e);
    });

</script>


</body>
</html>