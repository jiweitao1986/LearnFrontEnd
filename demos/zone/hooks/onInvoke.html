<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>onInvoke</title>
  <script src="../../../node_modules/zone.js/dist/zone.js"></script>
</head>
<body>

<script>

  // ----------------------------------------
  // onInvokeTask
  // 异步任务注册进任务队列时触发，比如调用setTimeout方法
  // ----------------------------------------
  //
  // ----------------------------------------
  (function(){

    const z = Zone.current.fork({
      name: 'z',
      onInvoke(delegate, current, target, callback, ...args) {
        // console.log(`entering zone '${target.name}'`);
        // return delegate.invoke(target, callback, ...args);
      }
    });

    function main() {
      console.log('main works ...');
      console.log(Zone.current.name);
    }

    z.run(main);

  })()

</script>


</body>
</html>